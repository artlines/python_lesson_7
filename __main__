import time
from file_generator import csv, json, doc

car_data = {'mark': 'Volvo', 'engine': 1.5, 'year': 2017}
start_time = time.time()
formats = ['csv', 'json', 'doc']
create_function = 'create'
filepath = 'files'


def get_filename(folder, format):
    return f"{folder}/{time.strftime('%d_%m_%Y__%H_%M_%S')}.{format}"


for format in formats:
    try:
        filename = get_filename(filepath, format)
        function = getattr(locals().get(format), create_function)
        function(filename, car_data)
    except Exception as e:
        print(e)
    else:
        print(f"Функция генерации {format} длится %s секунд" % (time.time() - start_time))
